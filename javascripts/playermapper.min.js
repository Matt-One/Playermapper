/*! Playermapper - CDawg [20170722] */
var site=document.domain;var char_matrix=map_matrix=1;var map_buffer="";var zoom=100;var zoom_max=250;var zoom_min=25;var map_x=map_y=map_drag_x=map_drag_y=0;var zone=0;var dk_zone=1;function showCharMatrix(){if(char_matrix){$("#char_matrix").hide();char_matrix=0;}else{$("#char_matrix").show();char_matrix=1;}}function showMapMatrix(){if(map_matrix){$(".map").css('background-image', 'none');map_matrix=0;}else{$(".map").css('background-image', map_buffer);map_matrix=1;console.log(map_buffer);}}function showMapZones(){if(!zone){$(".zone-bind").css("opacity", "0.4");zone=1;}else{$(".zone-bind").css("opacity", "0.0");$(".zone-bind").hover(function(){$(this).css("opacity", "0.4");}, function(){$(this).css("opacity", "0.0");});zone=0;}}function showDKZone(){if(dk_zone){$("#dk_zone").fadeOut(500).css({"borderColor":"transparent"});$(".dk").fadeOut(500);dk_zone=0;}else{$("#dk_zone").fadeIn(500).css({"borderColor":"#dedede"});$(".dk").fadeIn(500);dk_zone=1;}}function zoneIdentity(name){$("#minimap_title").html(name);$("#minimap_title").stop().css("background-color", "#717171").animate({ backgroundColor: "#181818"}, 500);}$( function(){setTimeout(function(){map_buffer=$(".map").css('background-image');map_center_x=$(".map").css('background-image');}, 1000);$(".map").draggable({cursor:"move",drag: function(){var offset=$(this).offset();map_drag_x=offset.left;map_drag_y=offset.top;}});$(window).mousewheel(function(turn, delta){if(delta==1){if(zoom>zoom_max-5)return false;zoom+=5;}else {if(zoom<zoom_min+5)return false;console.log(zoom);zoom-=5;}$(".map").css('zoom', zoom+'%');$("#zoom_val").text(zoom+'%');return false;});});$(window).mousemove(function(e){if((zoom > 120) || (zoom < 80)){$(".footprint_details").css({'top':"50px", 'left':"100%", "marginLeft":"-200px"});}else{$(".footprint_details").css({'top': e.clientY+15, 'left': e.clientX+15})}});function mapShift(dir){if(dir==1){map_y+=50;$('.map').css("top", map_y+map_drag_y);}else if(dir==2){map_y -=50;$('.map').css("top", map_y+map_drag_y);}else if(dir==3){map_x+=50;$('.map').css("left", map_x+map_drag_x);}else if(dir==4){map_x -=50;$('.map').css("left", map_x+map_drag_x);}else{map_x=map_y=map_drag_x=map_drag_y=0;mapResetPos();}}function mapZoom(zdir){if(zoom >= zoom_max){zoom=zoom_max-1;return;}if(zoom <= zoom_min){zoom=zoom_min+1;return}if(zdir==2){zoom+=5;}else if(zdir==1){zoom-=5.0;}else{zoom=100;}$(".map").css("zoom", zoom+"%");$("#zoom_val").text(zoom+"%");}function getElementsStartsWithId( id ){var children=document.body.getElementsByTagName('*');var elements=[], child;for (var i=0, length=children.length; i < length; i++) {child=children[i];if(child.id.substr(0, id.length)==id)elements.push(child);}return elements;}function search(e){var eventInstance=window.event ? event : e;var keyCode=eventInstance.charCode ? eventInstance.charCode : eventInstance.keyCode;if((keyCode==13) || (e=="click")){var query=$("#search_in").val();if((query != "*") && (query != "%") && (query.length > 1)){var footprint=getElementsStartsWithId(query);$(".footprint").hide();if($(".footprint")){$(footprint).show().css({"fontSize" : "22pt","textShadow" : "0px 0px 12px #fffd49","marginLeft" : "-4px","marginTop" : "-9px",});}}else {alert("Invalid query!\n\nPlease enter a zone or player name.\nMinimum 2 characters in length");}}else{if(e=="cancel"){$(".footprint").show().css({"fontSize" : "10pt","textShadow" : "0px 0px 1px #fff","marginLeft" : "0px","marginTop" : "0px",});$("#search_in").val("");}}}